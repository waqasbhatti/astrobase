{% extends 'cpbase.html' %}

{% block pagecontent %}
<div class="row">

  <div class="col-sm-2 sidebar-list">

    <h3>Checkplot list</h3>
    <ul id="checkplotlist" class="list-unstyled">
      {% for ind, entry in enumerate(project_checkplots) %}
      <li>
        <a class="checkplot-load" href="#"
           data-findex="{{ ind }}"
           data-fname="{{ entry }}">
          {{ entry }}
        </a>
      </li>
      {% end %}
    </ul>

  </div>

  <div class="col-sm-10">

    <!-- instructions and nav bar go here -->
    <div class="row">
      <div class="col-sm-12 text-sm-center">
        <p>Use the <kbd>&larr;</kbd> and the <kbd>&rarr;</kbd> keys to move
          through the checkplot list. All updates are automatically saved.<br>
          <a href="#" class="checkplot-prev">&lt;&lt; previous</a>
          | <span id="checkplot-current"></span> |
          <a href="#" class="checkplot-next">next &gt;&gt;</a>
        </p>
      </div>
    </div>

    <!-- first row: finderchart, objectinfo, varinfo, unphased LC -->
    <div class="row objectinfo-row">

      <div class="col-md-3 text-sm-center">
        <h4 id="objectid">objectid</h4>
        <h6 id="twomassid">twomassid</h6>
        <img class="img-fluid" id="finderchart">
      </div>

      <div class="col-md-4">

        <table class="table table-sm">
          <tr>
            <th>Observations</th>
            <td id="hatinfo">blah</td>
          </tr>
          <tr>
            <th>Coords and PM</th>
            <td id="coordspm">blah</td>
          </tr>
          <tr>
            <th>Magnitudes</th>
            <td id="mags">blah</td>
          </tr>
          <tr>
            <th>Colors</th>
            <td id="colors">blah</td>
          </tr>

        </table>

      </div>

      <div class="col-md-5">
        <img class="img-fluid" id="magseriesplot">
      </div>

    </div>

    <!-- next row contains the variability form -->
    <form name="variability-form">

        <div class="row">

          <div class="col-sm-2">
              <strong>Variable object?</strong>
          </div>

          <div class="col-sm-2">
              <strong>Period and epoch</strong>
          </div>

          <div class="col-sm-4">
              <strong>Object tags</strong>
          </div>

          <div class="col-sm-4">
              <strong>Variability tags</strong>
          </div>

        </div>

        <div class="row">

          <div class="col-sm-2">

            <label class="form-check-label">
              <input class="form-check-input"
                     type="radio"
                     name="varcheck"
                     id="varcheckyes"
                     value="yes">
              Yes
            </label>
            <label class="form-check-label">
              <input class="form-check-input"
                     type="radio"
                     name="varcheck"
                     id="varcheckmaybe"
                     value="maybe" checked>
              Maybe
            </label>
            <label class="form-check-label">
              <input class="form-check-input"
                     type="radio"
                     name="varcheck"
                     id="varcheckno"
                     value="no">
              No
            </label>

          </div>

          <div class="col-sm-2">
            <input type="text" class="form-control"
                   name="objectperiod" id="objectperiod"
                   placeholder="period in days">
            <input type="text" class="form-control"
                   name="objectepoch" id="objectepoch"
                   placeholder="epoch in JD">
          </div>

          <div class="col-sm-4">
            <input type="text" class="form-control"
                   name="objecttags" id="objecttags"
                   placeholder="object tag 1, object tag 2,...">
          </div>

          <div class="col-sm-4">
            <input type="text" class="form-control"
                   name="vartags" id="vartags"
                   placeholder="variability tag 1, variability tag 2,...">
          </div>

        </div>

    </form>

    <!-- next rows contain periodogram and phased LCs -->
    <div id="phasedlcs">
    </div>

  </div>

</div>
{% end %}

{% block pagejs %}
<script src="{{ static_url("cpserver.js") }}"></script>

<script>

  $(document).ready(function() {
  // set up the controls
  cpv.action_setup();

  // load the first checkplot


  // fix the height for the sidebar
  var winheight = $(window).height();
  $('.sidebar-list').css({'height': winheight + 'px'});

  });

  // this is to bind the left and right keys to the
  // next and previous object links
  $(document).keydown(function(event) {

  // right key pressed
  if (event.which == 39) {
  event.preventDefault();
  console.log('moving to the next object')
  $('.checkplot-next').click();

  }

  // left key pressed
  if (event.which == 37) {
  console.log('moving to the prev object')
  event.preventDefault();
  $('.checkplot-prev').click();
  }

  });

</script>
{% end %}
